<!DOCTYPE html>
<html>
<head>
	<!-- Spring 2022 -->
	<title>Class Schedule</title>
	<link rel="shortcut icon" href="https://www.sfsu.edu/favicon.ico">
	<style type="text/css">
		body {
			user-select: none;
			text-align: center;
			background-color: #231161;
		}
		table {
			width: 100%;
			margin-top: 6px;
			background-color: white;
			border-collapse: collapse;
		}
		table, th, td {
			border: 2px solid black;
		}
		.today {
			width: 13%;
		}
		.counter {
			padding: 3px;
			color: #ddd;
			font-weight: bold;
			border-width: 3px;
			border-radius: 4px;
			border-color: #c99700;
			border-style: solid;
		}
		.time {
			font-weight: normal;
		}
		.date {
			font-weight: normal;
		}
		.class {
			background-color: rgb(182,209,146);
		}
		.clickable {
			cursor: grab;
		}
		::-webkit-scrollbar {
			width: 5px;
			height: 5px;
			background-color: black;
		}

		::-webkit-scrollbar-thumb {
			border-radius: 2.5px;
			background: rgba(255, 255, 255, 0.6);
		}

		::-webkit-scrollbar-thumb:hover {
			background: rgba(255, 255, 255, 0.3);
		}
 	</style>
</head>
<body>
	<p><a class="counter">Unable to fetch counter</a></p>
	<table>
		<tr>
			<th style="width: 9%">Time<br><a class="time">Unable to fetch time</a></th>
			<th class="today">Sunday<br><a class="date">Unable to fetch date</a></th>
			<th class="today">Monday<br><a class="date">Unable to fetch date</a></th>
			<th class="today">Tuesday<br><a class="date">Unable to fetch date</a></th>
			<th class="today">Wednesday<br><a class="date">Unable to fetch date</a></th>
			<th class="today">Thursday<br><a class="date">Unable to fetch date</a></th>
			<th class="today">Friday<br><a class="date">Unable to fetch date</a></th>
			<th class="today">Saturday<br><a class="date">Unable to fetch date</a></th>
		</tr>
		<tr>
			<th rowspan="4">8:00 AM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">MATH 325 - 04/05<br>Lecture<br>8:00 AM - 9:15AM<br>Thornton Hall 326</td>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">MATH 325 - 04/05<br>Lecture<br>8:00 AM - 9:15AM<br>Thornton Hall 326</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">9:00 AM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td rowspan="11" class="class">PHYS 222 - 04<br>Laboratory<br>9:30 AM - 12:15 PM<br>Temporary Bldg R 4</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">10:00 AM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">11:00 AM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">12:00 PM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">AA S 210 - 02<br>Lecture<br>12:30 PM - 1:45 PM<br>Burk Hall 352</td>
			<td rowspan="5" class="class">AA S 212 - 04<br>Lecture<br>12:30 PM - 1:45 PM<br>Burk Hall 252</td>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">AA S 212 - 04<br>Lecture<br>12:30 PM - 1:45 PM<br>Burk Hall 252</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">1:00 PM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">2:00 PM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">PHYS 220 - 04<br>Lecture<br>2:00 PM - 3:15 PM<br>Thornton Hall 429</td>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">PHYS 220 - 04<br>Lecture<br>2:00 PM - 3:15 PM<br>Thornton Hall 429</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">3:00 PM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">4:00 PM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">5:00 PM</th>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">CSC 230 - 03<br>Lecture<br>5:00 PM - 6:15 PM<br>Thornton Hall 327</td>
			<td>&nbsp;</td>
			<td rowspan="5" class="class">CSC 230 - 03<br>Lecture<br>5:00 PM - 6:15 PM<br>Thornton Hall 327</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<th rowspan="4">6:00 PM</th>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
			<td>&nbsp;</td>
		</tr>
	</table>
</body>
<script type="text/javascript">
	// run functions on page load
	window.addEventListener('load', counter);
	window.addEventListener('load', clock);
	window.addEventListener('load', cal);

	// global variables
	let time = new Date();
	let year = time.getUTCFullYear();
	let month = time.getUTCMonth();
	let date = time.getUTCDate();
	let nextWeek = new Date(year, month, date).getTime() + 604800000;
	let dateOffset;
	let dateOffsetC;

	// counter function
	function counter() {
		let counter = document.getElementsByClassName("counter")[0];
		let day = time.getUTCDay() - dateOffset;
		day = dayFix(day);
		let now = new Date(year, month, date - dateOffset).getTime();
		let firstDate = new Date(2021, 7, 23).getTime();
		let days = Math.floor((now - firstDate)/86400000);
		let weekends = Math.floor(days/7) * 3;
		let realDays = (days - weekends) + 1;
		let suffix;

		// subtract no class days
		if (day == 5) {
			realDays--;
		} else if (day == 6) {
			realDays -= 2;
		} else if (day == 0) {
			realDays -= 3;
		}

			/* Fall 2021 */
		// Labor Day
		if (now >= 1630911600000) {
			realDays--;
		}
		// Veterans Day
		if (now >= 1636617600000) {
			realDays--;
		}
		// Thanksgiving Break
		if (now >= 1637568000000) {
			realDays--;
		}
		if (now >= 1637654400000) {
			realDays--;
		}
		if (now >= 1637740800000) {
			realDays--;
		}
		if (now >= 1637827200000) {
			realDays--;
		}
		if (now >= 1637913600000) {
			realDays--;
		}
		// End of semester
			// Week 1
		if (now >= 1639987200000) {
			realDays--;
		}
		if (now >= 1640073600000) {
			realDays--;
		}
		if (now >= 1640160000000) {
			realDays--;
		}
		if (now >= 1640246400000) {
			realDays--;
		}
		if (now >= 1640332800000) {
			realDays--;
		}
			// Week 2
		if (now >= 1640592000000) {
			realDays--;
		}
		if (now >= 1640678400000) {
			realDays--;
		}
		if (now >= 1640764800000) {
			realDays--;
		}
		if (now >= 1640851200000) {
			realDays--;
		}
		if (now >= 1640937600000) {
			realDays--;
		}
			// Week 3
		if (now >= 1641196800000) {
			realDays--;
		}
		if (now >= 1641283200000) {
			realDays--;
		}
		if (now >= 1641369600000) {
			realDays--;
		}
		if (now >= 1641456000000) {
			realDays--;
		}
		if (now >= 1641542400000) {
			realDays--;
		}
			// Week 4
		if (now >= 1641801600000) {
			realDays--;
		}
		if (now >= 1641888000000) {
			realDays--;
		}
		if (now >= 1641974400000) {
			realDays--;
		}
		if (now >= 1642060800000) {
			realDays--;
		}
		if (now >= 1642147200000) {
			realDays--;
		}
			// Week 5
		if (now >= 1642406400000) {
			realDays--;
		}
		if (now >= 1642492800000) {
			realDays--;
		}
		if (now >= 1642579200000) {
			realDays--;
		}
		if (now >= 1642665600000) {
			realDays--;
		}
		if (now >= 1642752000000) {
			realDays--;
		}
			/* Spring 2022 */
		// Spring Break
		if (now >= 1647846000000) {
			realDays--;
		}
		if (now >= 1647932400000) {
			realDays--;
		}
		if (now >= 1648018800000) {
			realDays--;
		}
		if (now >= 1648105200000) {
			realDays--;
		}
		if (now >= 1648191600000) {
			realDays--;
		}
		// Cesar Chavez Day
		if (now >= 1648710000000) {
			realDays--;
		}

		// get suffix
		if (realDays % 10 == 1) {
			suffix = "st";
		} else if (realDays % 10 == 2) {
			suffix = "nd";
		} else if (realDays % 10 == 3) {
			suffix = "rd";
		} else {
			suffix = "th";
		}

		// display text
		if (now > 1653030000000) {
			counter.innerHTML = "<u>118</u> days of learning";
		} else if (now < firstDate) {
			counter.innerHTML = "Soon<sup>TM</sup>";
		} else if (day == 0 || day == 5 || day == 6 || /* Fall 2020 */ /* Labor Day */ now == 1630911600000 || /* Veterans Day */ now == 1636617600000 || /* Thanksgiving Break */ now == 1637568000000 || now == 1637654400000 || now == 1637740800000 || now == 1637827200000 || now == 1637913600000 || /* End of semester *//*Week 1*/ now == 1639987200000 || now == 1640073600000 || now == 1640160000000 || now == 1640246400000 || now == 1640332800000 || /*Week 2*/ now == 1640592000000 || now == 1640678400000 || now == 1640764800000 || now == 1640851200000 || now == 1640937600000 || /*Week 3*/ now == 1641196800000 || now == 1641283200000 || now == 1641369600000 || now == 1641456000000 || now == 1641542400000 || /* Week 4 */ now == 1641801600000 || now == 1641888000000 || now == 1641974400000 || now == 1642060800000 || now == 1642147200000 || /* Week 5 */ now == 1642406400000 || now == 1642492800000 || now == 1642579200000 || now == 1642665600000 || now == 1642752000000 || /* Spring 2021 */ /* Spring Break */ now == 1647846000000 || now == 1647932400000 || now == 1648018800000 || now == 1648105200000 || now == 1648191600000 || /* Cesar Chavez Day */ now == 1648710000000) {
			counter.innerHTML = "<u>" + realDays + "</u> days of learning";
		} else {
			counter.innerHTML = "<u>" + realDays + suffix + "</u> day of learning";
		}
	}

	// clock functions
	function clock() {
		time = new Date();
		let hours = getHours(time.getUTCHours());
		let minutes = zero(time.getUTCMinutes());
		let seconds = zero(time.getUTCSeconds());
		let ap = (hours < 12) ? "AM" : "PM";
		hours = apOffset(hours);
		tz = (daylight()) ? "PDT" : "PST"
		document.getElementsByClassName("time")[0].innerHTML = "<i>" + hours + ":" + minutes + ":" + seconds + " " + ap + "</i>" + " " + tz;

		if (dateOffsetC != dateOffset) {
			re();
		}

		setTimeout(clock, 0);
	}
	function getHours(h) {
		h = (daylight()) ? h - 7 : h - 8;

		if (h < 0) {
			h += 24;
			dateOffset = 1;
		} else if (h >= 24) {
			h -= 24;
			dateOffset = -1;
		} else {
			dateOffset = 0;
		}

		return h;
	}
	function zero(ms) {
		return (ms < 10) ? "0" + ms : ms;
	}
	function apOffset(h) {
		if (h > 12) {
			h -= 12;
		} else if (h == 0) {
			h = 12;
		}

		return h;
	}
	function daylight() {
		// daylight calculation times
		let daylightStart;
		let currentTime = time.getTime();
		let timezoneOffset = time.getTimezoneOffset();
		let daylightEnd;

		// find daylight start and end times
		let countS = 0;
		let countE = true;
		for (let i = 1; true; i++) {
			let start = new Date(year, 2, i, 10, 0 - timezoneOffset);
			let end = new Date(year, 10, i, 9, 0 - timezoneOffset);

			if (start.getUTCDay() == 0) {
				countS++
			}
			if (countE && end.getUTCDay() == 0) {
				countE = false;
				daylightEnd = end.getTime();
			}
			if (countS == 2) {
				daylightStart = start.getTime();
				break;
			}
		}

		return currentTime > daylightStart && currentTime < daylightEnd;
	}

	// calendar functions
	function cal() {
		// save offset
		dateOffsetC = dateOffset;

		let today = document.getElementsByClassName("today");
		let dates = document.getElementsByClassName("date");
		let months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
		let day = time.getUTCDay() - dateOffset;
		day = dayFix(day);
		let dateFix = date - dateOffset;

		// reset color
		for (let i = 0; i < 7; i++) {
			today[i].style.color = "black";
		}

		// color today red
		today[day].style.color = "red";

		// get month and date for each day of the week
		let offset = 0;
		while (day >= 0) {
			if (dateFix - offset < 1) {
				if (month == 0) {
					dates[day].innerHTML = months[11] + " " + (dateFix - offset + 31);
				} else if (month == 2 || month == 4 || month == 6 || month == 7 || month == 9 || month == 11) {
					dates[day].innerHTML = months[month - 1] + " " + (dateFix - offset + 30);
				} else if (month == 1 || month == 3 || month == 5 || month == 8 || month == 10) {
					dates[day].innerHTML = months[month - 1] + " " + (dateFix - offset + 31);
				}
			} else {
				dates[day].innerHTML = months[month] + " " + (dateFix - offset);
			}
			day--;
			offset++;
		}

		day = time.getUTCDay() - dateOffset;
		day = dayFix(day);
		offset = 0;
		while (day != 6) {
			day++;
			offset++;
			if (dateFix + offset > 31 && (month == 0 || month == 2 || month == 4 || month == 6 || month == 7 || month == 9)) {
				dates[day].innerHTML = months[month + 1] + " " + (dateFix + offset - 31);
			} else if (dateFix + offset > 31 && month == 11) {
				dates[day].innerHTML = months[0] + " " + (dateFix + offset - 31);
			} else if (dateFix + offset > 30 && (month == 3 || month == 5 || month == 8 || month == 10)) {
				dates[day].innerHTML = months[month + 1] + " " + (dateFix + offset - 30);
			} else if (dateFix + offset > 29 && month == 1 && leap()) {
				dates[day].innerHTML = months[month + 1] + " " + (dateFix + offset - 29);
			} else if (dateFix + offset > 28 && month == 1 && !leap()) {
				dates[day].innerHTML = months[month + 1] + " " + (dateFix + offset - 28);
			} else {
				dates[day].innerHTML = months[month] + " " + (dateFix + offset);
			}
		}
	}
	function dayFix(d) {
		if (d < 0) {
			d += 7;
		} else if (d > 6) {
			d -= 7;
		}

		return d;
	}
	function leap() {
		return year % 4 == 0 && (year % 100 != 0 || year % 400 == 0);
	}

	// refresh
	function re() {
		// hard refresh
		if (new Date(year, month, date).getTime() >= nextWeek) {
			location.reload();
		}

		// soft refresh
		year = time.getUTCFullYear();
		month = time.getUTCMonth();
		date = time.getUTCDate();
		counter();
		cal();
	}
</script>
</html>